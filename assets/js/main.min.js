var map;require(["esri/map","esri/layers/FeatureLayer","esri/dijit/PopupTemplate","esri/request","esri/geometry/Point","esri/graphic","dojo/on","dojo/_base/array","dojo/domReady!"],function(e,o,a,t,n,r,i,s){var l;function p(e,o){var a=[];s.forEach(e.features,function(e){e.attributes;console.log(e.geometry);var o=new n(e.geometry);a.push(o)}),console.log(a),l.applyEdits(a,null,null)}function d(e){console.log("failed")}(map=new e("map",{basemap:"gray",center:[-99.701254,19.294099],zoom:9})).on("mouse-drag",function(e){if(map.infoWindow.isShowing){var o=map.infoWindow.getSelectedFeature().geometry;map.extent.contains(o)||map.infoWindow.hide()}}),fetch("http://192.168.104.193:8000/data/ESCUELAS.json").then(e=>e.json()).then(e=>{console.log(e);var n={layerDefinition:{geometryType:e.geometryType,objectIdField:"ObjectID",drawingInfo:{renderer:{type:"simple",symbol:{type:"esriPMS",url:"images/flickr.png",contentType:"image/png",width:15,height:15}}},fields:e.fields},featureSet:{features:[],geometryType:e.geometryType}};new a({title:"{title}",description:"{description}"});l=new o(n,{id:"schoolsLayer"}),map.on("layers-add-result",function(e){t({url:"./data/escuela.json",callbackParamName:"jsoncallback"}).then(p,d)}),map.addLayers([l])})});