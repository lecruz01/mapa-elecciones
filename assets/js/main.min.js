mapboxgl.accessToken="pk.eyJ1IjoibGVjcnV6MDEiLCJhIjoiY2pyY2t1aXJiMWV3bTQ0bndiZHFtZnd3dCJ9.T_AWHGpxthQg8DRhzuKTGg",fetch("http://192.168.0.100:8000/data/entidades.geojson").then(e=>e.json()).then(e=>{console.log(e),map.on("load",function(){for(var a=[],o=0;o<e.features.length;o++){var t={type:"Feature",geometry:e.features[o].geometry};console.log(e.features[o].properties.G18),a.push(t)}map.addSource("escuelas-data",{type:"geojson",data:e}),map.loadImage("../img/school.png",function(e,a){if(e)throw e;map.addImage("school",a),map.addLayer({id:"escuelas-layer",type:"fill",source:"escuelas-data",paint:{"fill-color":{type:"categorical",property:"G18",stops:[["PT-MORENA-PES","#F00"],["PRI","#0f0"],["PAN-PRD-MC","#00f"],["MORENA","#000"]]},"fill-opacity":.6}}),map.on("click","escuelas-layer",function(e){for(var a=e.features[0].geometry.coordinates.slice(),o="<h4>"+e.features[0].properties.NOMSERV+"</h4><p>"+e.features[0].properties.GEOGRAFICO+" "+e.features[0].properties.TIPO+" "+e.features[0].properties.AMBITO+"</p><em>Estado: "+e.features[0].properties.CONDICION+"</em>";Math.abs(e.lngLat.lng-a[0])>180;)a[0]+=e.lngLat.lng>a[0]?360:-360;(new mapboxgl.Popup).setLngLat(a).setHTML(o).addTo(map)}),map.on("mouseenter","escuelas-layer",function(){map.getCanvas().style.cursor="pointer"}),map.on("mouseleave","escuelas-layer",function(){map.getCanvas().style.cursor=""})})})});var bounds=[[-74.04728500751165,40.68392799015035],[-73.91058699000139,40.87764500765852]],map=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v10",center:[-99.701254,19.294099],zoom:8});